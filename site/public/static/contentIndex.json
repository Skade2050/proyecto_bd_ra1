{"docs/1-ingesta-almacenamiento":{"slug":"docs/1-ingesta-almacenamiento","filePath":"docs/1-ingesta-almacenamiento.md","title":"1. Ingesta y Almacenamiento","links":[],"tags":[],"content":"Contexto del Proyecto\nEl objetivo de este proyecto es construir un pipeline de datos que procese las encuestas mensuales recibidas en formato Excel (*.xlsx).\nA trav√©s de este flujo, los datos crudos se limpian, validan y transforman en informaci√≥n √∫til para el an√°lisis posterior.\nDe esta forma, se asegura que las m√©tricas de satisfacci√≥n reflejen datos fiables y trazables, garantizando la calidad del an√°lisis mensual.\n\nProceso de Ingesta\nEl proceso de ingesta comienza con la recopilaci√≥n y normalizaci√≥n de los archivos Excel que contienen las encuestas.\n\n\nOrigen de los Datos\n\nLos datos de entrada se encuentran en la carpeta project/output/xlsx/.\nCada archivo (encuestas_YYYYMM.xlsx) representa un lote mensual de respuestas recogidas.\nEstos ficheros contienen informaci√≥n sobre:\n\nfecha de la encuesta\nid_respuesta\ncanal (por ejemplo, online o tienda)\nproducto\nsatisfacci√≥n (valor del 1 al 10)\ncomentario, tienda y agente\n\n\n\n\n\nLectura y Normalizaci√≥n\nDurante esta fase, el sistema:\n\nLee cada Excel mediante la funci√≥n read_xlsx_exports() (archivo ingest.py).\nEstandariza los nombres de las columnas a min√∫sculas y elimina espacios en blanco.\nAsegura la existencia de las columnas m√≠nimas necesarias (fecha, id_respuesta, satisfaccion, etc.).\nA√±ade tres columnas de trazabilidad:\n_source_file   ‚Üí nombre del archivo original  \n_ingest_ts     ‚Üí fecha y hora exactas en que se proces√≥ el archivo  \n_batch_id      ‚Üí identificador del lote (por ejemplo, &quot;encuestas_202511&quot;)\n\n\n\n\nAlmacenamiento Inicial (Capa Raw)\nUna vez procesadas las encuestas, se almacenan en una base de datos SQLite (project/encuestas.db), dentro de la tabla raw_encuestas.\nEste paso garantiza que todos los datos originales queden respaldados y disponibles para futuras revisiones o reprocesos.\nAdem√°s, tambi√©n se genera una copia en formato Parquet (clean_encuestas.parquet) dentro de project/output/xlsx/, lo que facilita su uso en herramientas anal√≠ticas.\n\n\n\nEjemplo de Flujo\ndata/drops/encuestas_2025_large.csv\n       ‚Üì\nxlsx_export.py  ‚Üí  genera Excel limpio (Encuestas + ResumenCalidad)\n       ‚Üì\ningest.py       ‚Üí  lee los Excels y los combina en un solo DataFrame\n       ‚Üì\nstore.py        ‚Üí  guarda los datos en SQLite (raw_encuestas)\n       ‚Üì\nclean.py        ‚Üí  limpia y valida los registros"},"docs/2-limpieza-calidad":{"slug":"docs/2-limpieza-calidad","filePath":"docs/2-limpieza-calidad.md","title":"2. Limpieza y Control de Calidad","links":[],"tags":[],"content":"Contexto de la Fase\nUna vez que los datos de encuestas han sido ingeridos y almacenados correctamente, el siguiente paso del pipeline consiste en limpiar y validar la informaci√≥n.\nEl objetivo de esta fase es asegurar que los registros sean coherentes, completos y √∫tiles para los an√°lisis posteriores.\nEsto implica detectar errores comunes (fechas inv√°lidas, puntuaciones fuera de rango, identificadores vac√≠os, etc.) y aislar esos casos en una zona de cuarentena para no alterar los resultados finales.\n\n1. Proceso de Limpieza\nLa limpieza se realiza mediante la funci√≥n clean_data() ubicada en el archivo clean.py.\nEste proceso trabaja sobre los datos almacenados en la tabla raw_encuestas y genera dos salidas principales:\n\nclean ‚Üí datos v√°lidos y listos para el an√°lisis.\nquarantine ‚Üí registros con errores o inconsistencias.\n\nPasos principales:\n\n\nNormalizaci√≥n de Nombres y Textos\n\nConvierte todos los nombres de columnas a min√∫sculas.\nElimina espacios innecesarios en los textos.\nHomogeneiza los valores para evitar duplicidades por diferencias de formato (por ejemplo, ‚Äù Online‚Äù y ‚Äúonline‚Äù se tratan igual).\n\n\n\nConversi√≥n de Tipos de Datos\n\nLa columna fecha se transforma en formato fecha est√°ndar (datetime).\nLa columna satisfaccion se convierte en valor num√©rico (1 a 10).\nValores como &quot;no sabe/no contesta&quot; o &quot;ns/nc&quot; se transforman en NaN (vac√≠os), para poder calcular correctamente los promedios.\n\n\n\nDetecci√≥n de Duplicados\n\nSi una misma respuesta (id_respuesta) aparece varias veces, se conserva solo la m√°s reciente, siguiendo la pol√≠tica ‚Äú√∫ltimo gana‚Äù.\nEsta decisi√≥n se basa en el campo _ingest_ts (marca temporal del momento en que se carg√≥ el dato).\n\n\n\nValidaci√≥n de Calidad\nSe aplican reglas autom√°ticas para detectar registros inv√°lidos:\n\nfecha_invalida: cuando la fecha est√° vac√≠a o no puede convertirse.\nsatisf_fuera_rango: cuando la satisfacci√≥n no est√° entre 1 y 10.\nid_respuesta_vacio: cuando el identificador est√° en blanco o ausente.\n\nLos registros que incumplen alguna de estas reglas se env√≠an a la cuarentena con una explicaci√≥n de la causa.\n\n\n\n2. Estructura del Resultado\nAl finalizar el proceso, el pipeline devuelve dos conjuntos de datos:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSalidaDescripci√≥nEjemplo de usocleanEncuestas limpias y v√°lidasUsadas para calcular medias, distribuciones, KPIs, etc.quarantineRespuestas con errores o valores no v√°lidosGuardadas para revisi√≥n manual o trazabilidad.\nEn la tabla quarantine, los motivos se guardan en la columna _quarantine_reason, por ejemplo:\nfecha_invalida\nsatisf_fuera_rango\nfecha_invalida;satisf_fuera_rango"},"docs/3-modelo-reporte":{"slug":"docs/3-modelo-reporte","filePath":"docs/3-modelo-reporte.md","title":"3. Modelado y Generaci√≥n de Reportes","links":[],"tags":[],"content":"Contexto\nUna vez completada la fase de limpieza, los datos de encuestas ya son fiables y coherentes.\nEl siguiente paso del pipeline consiste en modelarlos y resumirlos en un formato comprensible para el an√°lisis mensual.\nEl objetivo principal de esta etapa es transformar los datos limpios en informaci√≥n √∫til, calculando m√©tricas clave (KPIs) y generando un reporte en formato Markdown que sintetiza los resultados del periodo.\n\n1. Modelado: Transformar Datos Limpios en M√©tricas\nEl modelado se realiza en el archivo report.py, a trav√©s de la funci√≥n generate_report().\nAqu√≠ se agrupan y analizan los datos limpios (clean_encuestas) para obtener indicadores relevantes:\nKPIs calculados\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nM√©tricaDescripci√≥nEjemploEncuestas (clean)N√∫mero total de registros v√°lidos tras la limpieza.1.838NS/NCRespuestas sin valoraci√≥n (nulos o ‚Äúno sabe/no contesta‚Äù).227 (12.4%)Media de satisfacci√≥nPromedio aritm√©tico de las puntuaciones de satisfacci√≥n (1‚Äì10).5.41Evoluci√≥n mensualCantidad y media de satisfacci√≥n por mes.Enero: 5.43 ‚Äî Febrero: 5.70\nEstos valores se calculan agrupando la columna satisfaccion y ordenando las fechas por mes.\n\n2. Estructura del Reporte\nEl reporte se genera autom√°ticamente en formato Markdown (reporte.md) dentro de la carpeta project/output/.\nContiene cuatro secciones principales:\nüßæ 1. Contexto\nInformaci√≥n b√°sica sobre los datos procesados:\n\nFuente (encuestas_YYYYMM.xlsx)\nPeriodo cubierto (m√≠nimo y m√°ximo de fechas)\nMecanismo de trazabilidad (_ingest_ts, _source_file, _batch_id)\n\nüìä 2. KPIs\nResumen con las m√©tricas m√°s importantes (totales, medias y porcentajes).\nüìà 3. Tablas de Resultados\nIncluye:\n\nDistribuci√≥n de satisfacci√≥n (de 1 a 10 + NS/NC)\nEvoluci√≥n mensual de la media de satisfacci√≥n y n√∫mero de encuestas\n\nEjemplo:\n## Distribuci√≥n de satisfacci√≥n (1‚Äì10 + NS/NC)\n| satisf_str | n |\n|-------------|---|\n| 1 | 167 |\n| 2 | 171 |\n| 3 | 180 |\n| ... | ... |\n| 10 | 149 |\n| NS/NC | 227 |"},"index":{"slug":"index","filePath":"index.md","title":"Pipeline de Encuestas","links":["docs/1-ingesta-almacenamiento","docs/2-limpieza-calidad","docs/3-modelo-reporte","reportes/reporte-encuestas"],"tags":[],"content":"Pipeline de Encuestas\nBienvenido üëã\nEste sitio documenta el desarrollo y funcionamiento del pipeline de encuestas, un sistema automatizado que transforma archivos de datos brutos en reportes anal√≠ticos listos para su revisi√≥n.\nEl objetivo principal es procesar encuestas de satisfacci√≥n, garantizando calidad, trazabilidad y generaci√≥n autom√°tica de informes.\n\nüß≠ Estructura de la documentaci√≥n\nüìÇ 1. Ingesta y Almacenamiento\nExplica c√≥mo se cargan los archivos fuente (CSV o Excel), c√≥mo se detecta el separador autom√°ticamente, se validan las columnas y se genera un Excel con metadatos y un resumen de calidad.\nAdem√°s, detalla la trazabilidad (source_file, ingest_ts, batch_id) y el almacenamiento en base de datos SQLite y formato Parquet.\nüëâ Ver secci√≥n ‚Üí Ingesta y Almacenamiento\n\nüßπ 2. Limpieza y Control de Calidad\nDescribe c√≥mo se normalizan los textos, se corrigen los valores, y se aplican reglas de validaci√≥n (fechas, rangos de satisfacci√≥n, IDs v√°lidos).\nLos registros que no cumplen las reglas se mueven autom√°ticamente a una tabla de cuarentena, preservando el motivo de su exclusi√≥n.\nüëâ Ver secci√≥n ‚Üí Limpieza y Control de Calidad\n\nüìä 3. Modelado y Generaci√≥n de Reportes\nDetalla el proceso de an√°lisis y generaci√≥n de KPIs, con c√°lculos de medias, porcentajes y evoluci√≥n temporal.\nIncluye la exportaci√≥n a Excel (informe de calidad) y Markdown (reporte de resultados).\nüëâ Ver secci√≥n ‚Üí Modelado y Generaci√≥n de Reportes\n\nüìà Reporte Final\nVisualiza el informe final de encuestas generado autom√°ticamente a partir del pipeline.\nIncluye m√©tricas clave, distribuci√≥n de satisfacci√≥n, evoluci√≥n mensual y control de calidad de los datos.\nüëâ Ver reporte ‚Üí Reporte UT1 ¬∑ Encuestas de Satisfacci√≥n\n\nüß© Tecnolog√≠as utilizadas\n\nPython + Pandas ‚Üí lectura, limpieza y an√°lisis de datos.\nSQLite + Parquet ‚Üí persistencia eficiente.\nOpenPyXL ‚Üí generaci√≥n de informes Excel con formato autom√°tico.\nQuartz ‚Üí documentaci√≥n web del proyecto.\n\n\nüß† Autores y cr√©ditos\nProyecto acad√©mico desarrollado por\nLeandro P√©rez Mart√≠nez ‚Äî m√≥dulo Big Data Aplicado / UT1 ‚Äì RA1 (FCT)\nCIFP Carlos III, Cartagena (Murcia).\n\n‚ú≥Ô∏è √öltima actualizaci√≥n: 9 de noviembre de 2025."},"reportes/reporte-encuestas":{"slug":"reportes/reporte-encuestas","filePath":"reportes/reporte-encuestas.md","title":"Reporte UT1 ¬∑ Encuestas de Satisfacci√≥n","links":[],"tags":[],"content":"Informe de Encuestas (resumen mensual)\nEste documento presenta un resumen claro y comprensible de los resultados obtenidos tras el procesamiento de las encuestas.\nIncluye indicadores clave (KPIs), evoluci√≥n temporal y control de calidad de los datos.\n\n1. Datos generales\nPeriodo analizado: 2025-01-11 ‚Äî 2025-12-12\nRegistros procesados (totales): 5000\nRegistros v√°lidos (clean): 1838\nRegistros en cuarentena: 3162\n\nLos datos v√°lidos (clean) cumplen con las reglas de calidad definidas (fechas v√°lidas, satisfacci√≥n 1‚Äì10, id_respuesta presente).\nLos registros en cuarentena no superan dichas reglas y se almacenan con su motivo de rechazo.\n\n\n2. Resumen r√°pido\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIndicadorValorEncuestas v√°lidas (clean)1838Respuestas NS/NC (sin valor)227% NS/NC sobre Clean12.4%Media de satisfacci√≥n (1‚Äì10)5.41\n\n3. Interpretaci√≥n de indicadores\n\nEncuestas v√°lidas (clean): respuestas que pasan las reglas b√°sicas de calidad.\nNS/NC: respuestas sin puntuaci√≥n de satisfacci√≥n (por ejemplo, ‚Äúno sabe / no contesta‚Äù).\n% NS/NC: porcentaje de NS/NC respecto al total de respuestas v√°lidas.\nMedia de satisfacci√≥n: valor medio de las puntuaciones (1 = muy mala, 10 = muy buena).\n\n\n4. Distribuci√≥n de satisfacci√≥n (1‚Äì10 + NS/NC)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvalorn11672171318041535156613671848169915310149NS/NC227\n\nMuestra la distribuci√≥n general de las puntuaciones, permitiendo detectar tendencias o sesgos.\n\n\n5. Evoluci√≥n mensual\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nmesencuestasmedia_satisf2025-01-01 00:00:001955.432025-02-01 00:00:001485.72025-03-01 00:00:001495.482025-04-01 00:00:001555.132025-05-01 00:00:001455.572025-06-01 00:00:001345.452025-07-01 00:00:001395.062025-08-01 00:00:001485.372025-09-01 00:00:001855.382025-10-01 00:00:001855.372025-11-01 00:00:001835.352025-12-01 00:00:001555.35\n\nPermite observar la estabilidad mensual de la media de satisfacci√≥n.\nSe aprecia una media relativamente constante con ligeras variaciones entre 5.3 y 5.7.\n\n\n6. Calidad de los datos (cuarentena)\nLos registros que no cumplen las reglas de calidad se guardan aparte con su motivo espec√≠fico:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncausanfecha_invalida2906fecha_invalida;satisf_fuera_rango165satisf_fuera_rango91\n\n\nfecha_invalida: error o ausencia en la fecha.\nsatisf_fuera_rango: puntuaci√≥n fuera del rango permitido (1‚Äì10).\nCombinadas: varios errores en la misma fila.\n\nEstas filas se almacenan en la tabla quarantine_encuestas para auditor√≠a y depuraci√≥n futura.\n\n\n7. Conclusiones generales\n\nLa satisfacci√≥n media se mantiene estable a lo largo del a√±o (5.4/10).\nEl porcentaje de NS/NC es moderado (12.4%), lo que sugiere una calidad de respuesta aceptable.\nLa mayor√≠a de las incidencias en cuarentena se deben a fechas inv√°lidas, indicando posibles errores de formato o exportaci√≥n.\nRecomendaci√≥n: reforzar la validaci√≥n previa de fechas y fomentar la respuesta completa en las encuestas.\n\n\n8. Persistencia y trazabilidad\n\nSQLite (project/encuestas.db):\n\nraw_encuestas: datos originales.\nclean_encuestas: datos limpios.\nquarantine_encuestas: registros rechazados.\n\n\nExcel (project/output/informe_de_calidad.xlsx): resumen de nulos y causas de cuarentena.\nMarkdown (project/output/reporte.md): este informe.\n\n\nCada registro contiene campos de trazabilidad: _source_file, _ingest_ts, _batch_id.\n\n"}}